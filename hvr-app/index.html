<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huwelijksvermogensrecht Bepaler</title>
    <!-- Updated: Force GitHub Pages deployment -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            max-width: 800px;
            width: 100%;
            text-align: center;
            font-size: 0.85em;
            color: #4a5568;
            line-height: 1.5;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .footer .copyright {
            font-weight: 600;
            color: #58b3e5;
            margin-bottom: 10px;
        }
        
        .footer .disclaimer {
            font-size: 0.8em;
            color: #718096;
            font-style: italic;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #58b3e5 0%, #4a9fd1 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            transform: translateY(0);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .container:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.35);
        }
        
        h1 {
            color: #5a67d8;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .step {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .question {
            font-size: 1.2em;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 500;
        }
        
        input[type="date"],
        select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #f7fafc;
        }
        
        input[type="date"]:focus,
        select:focus {
            outline: none;
            border-color: #58b3e5;
            background-color: white;
            box-shadow: 0 0 0 3px rgba(88, 179, 229, 0.1);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .radio-option {
            flex: 1;
        }
        
        .radio-option input[type="radio"] {
            display: none;
        }
        
        .radio-option label {
            display: block;
            padding: 15px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #f7fafc;
        }
        
        .radio-option input[type="radio"]:checked + label {
            background-color: #58b3e5;
            color: white;
            border-color: #58b3e5;
            transform: scale(1.05);
        }
        
        .radio-option label:hover {
            border-color: #58b3e5;
            background-color: #edf2f7;
        }
        
        .radio-option input[type="radio"]:checked + label:hover {
            background-color: #4a9fd1;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #58b3e5 0%, #4a9fd1 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(88, 179, 229, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 5px 20px rgba(74, 85, 104, 0.4);
        }
        
        .result {
            display: none;
            padding: 30px;
            background: linear-gradient(135deg, #f6f9fc 0%, #e9ecef 100%);
            border-radius: 12px;
            margin-top: 30px;
            border: 2px solid #cbd5e0;
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .result h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .result-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .result-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }
        
        .result-item h3 {
            color: #58b3e5;
            margin-bottom: 10px;
            font-size: 1.2em;
        }
        
        .result-item p {
            color: #4a5568;
            line-height: 1.6;
        }
        
        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #58b3e5 0%, #4a9fd1 100%);
            border-radius: 3px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .info-box {
            background: #ebf8ff;
            border-left: 4px solid #3182ce;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
        }
        
        .info-box p {
            color: #2c5282;
            font-size: 0.95em;
        }
        
        /* Print styles voor PDF en afdrukken */
        @media print {
            body {
                background: white !important;
                font-family: 'Times New Roman', serif;
                font-size: 12pt;
                line-height: 1.4;
                color: black !important;
                margin: 0;
                padding: 20px;
            }
            
            .container {
                background: white !important;
                box-shadow: none !important;
                border-radius: 0 !important;
                transform: none !important;
                backdrop-filter: none !important;
                margin: 0;
                padding: 0;
                max-width: none;
                width: 100%;
            }
            
            .step, .progress-bar {
                display: none !important;
            }
            
            .result {
                display: block !important;
                background: white !important;
                border: none !important;
                margin: 0;
                padding: 0;
                animation: none !important;
            }
            
            .result h2 {
                color: black !important;
                font-size: 18pt;
                margin-bottom: 20pt;
                text-align: center;
                page-break-after: avoid;
            }
            
            .result-item {
                background: white !important;
                border: 1px solid #ccc !important;
                margin-bottom: 15pt;
                padding: 15pt;
                border-radius: 0 !important;
                box-shadow: none !important;
                page-break-inside: avoid;
                break-inside: avoid;
                transform: none !important;
            }
            
            .result-item h3 {
                color: black !important;
                font-size: 14pt;
                margin-bottom: 8pt;
                page-break-after: avoid;
            }
            
            .result-item p {
                color: black !important;
                font-size: 11pt;
                line-height: 1.4;
                margin: 0;
            }
            
            .export-buttons, .footer {
                display: none !important;
            }
            
            .print-header {
                display: block !important;
                text-align: center;
                margin-bottom: 30pt;
                padding-bottom: 15pt;
                border-bottom: 2px solid black;
            }
            
            .print-footer {
                display: block !important;
                position: fixed;
                bottom: 20pt;
                left: 0;
                right: 0;
                text-align: center;
                font-size: 9pt;
                border-top: 1px solid #ccc;
                padding-top: 10pt;
            }
        }
        
        /* Export button styling */
        .export-buttons {
            display: none;
            margin-top: 20px;
            text-align: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .export-buttons.show {
            display: flex;
        }
        
        .btn-export {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            margin: 5px;
        }
        
        .btn-export:hover {
            box-shadow: 0 5px 20px rgba(40, 167, 69, 0.4);
        }
        
        .btn-print {
            background: linear-gradient(135deg, #6f42c1 0%, #e83e8c 100%);
            margin: 5px;
        }
        
        .btn-print:hover {
            box-shadow: 0 5px 20px rgba(111, 66, 193, 0.4);
        }
        
        /* Print-only elements */
        .print-header, .print-footer {
            display: none;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .radio-group {
                flex-direction: column;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Huwelijksvermogensrecht Bepaler</h1>
        
        <div class="progress-bar">
            <div class="progress" id="progressBar"></div>
        </div>
        
        <!-- Step 1: Huwelijksgegevens -->
        <div class="step active" id="step1">
            <div class="question">Wat zijn de basisgegevens van het huwelijk?</div>
            <div class="info-box">
                <p>De huwelijksdatum bepaalt welk wettelijk systeem van toepassing is. Het land waar het huwelijk is voltrokken is relevant voor de geldigheid en vorm van eventuele rechtskeuzes.</p>
            </div>
            <div class="input-group">
                <label for="marriageDate">Huwelijksdatum:</label>
                <input type="date" id="marriageDate" required>
            </div>
            <div class="input-group">
                <label for="marriageCountry">Land waar het huwelijk is voltrokken:</label>
                <select id="marriageCountry" required>
                    <option value="">Selecteer een land</option>
                    <optgroup label="Noord-Europa">
                        <option value="FI">Finland</option>
                        <option value="NO">Noorwegen</option>
                        <option value="IS">IJsland</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="NL">Nederland</option>
                        <option value="DE">Duitsland</option>
                        <option value="BE">België</option>
                        <option value="FR">Frankrijk</option>
                        <option value="IT">Italië</option>
                        <option value="ES">Spanje</option>
                        <option value="PT">Portugal</option>
                        <option value="AT">Oostenrijk</option>
                        <option value="CH">Zwitserland</option>
                        <option value="UK">Verenigd Koninkrijk</option>
                        <option value="IE">Ierland</option>
                        <option value="DK">Denemarken</option>
                        <option value="SE">Zweden</option>
                        <option value="GR">Griekenland</option>
                        <option value="CY">Cyprus</option>
                        <option value="LI">Liechtenstein</option>
                        <option value="TR">Turkije</option>
                        <option value="VA">Vaticaan</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="AL">Albanië</option>
                        <option value="BG">Bulgarije</option>
                        <option value="HU">Hongarije</option>
                        <option value="YU">Joegoslavië</option>
                        <option value="PL">Polen</option>
                        <option value="RO">Roemenië</option>
                        <option value="CZ">Tsjechië</option>
                        <option value="SK">Slowakije</option>
                        <option value="USSR">Voormalige USSR landen</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Verenigde Staten</option>
                        <option value="CA">Canada</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="DO">Dominicaanse Republiek</option>
                        <option value="HT">Haïti</option>
                        <option value="MID_AM">Rest van Midden-Amerika</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Suriname</option>
                        <option value="ZUID_AM">Rest van Zuid-Amerika</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="DZ">Algerije</option>
                        <option value="AO">Angola</option>
                        <option value="EG">Egypte</option>
                        <option value="CV">Kaapverdische Republiek</option>
                        <option value="MA">Marokko</option>
                        <option value="SN">Senegal</option>
                        <option value="SO">Somalië</option>
                        <option value="TD">Tsjaad</option>
                        <option value="TN">Tunesië</option>
                        <option value="BW">Botswana</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundi</option>
                        <option value="KE">Kenia</option>
                        <option value="NG">Nigeria</option>
                        <option value="SL">Sierra Leone</option>
                        <option value="SD">Sudan</option>
                        <option value="ZA">Zuid Afrika</option>
                        <option value="ZR">Zaïre</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="AF">Afghanistan</option>
                        <option value="ID">Indonesië</option>
                        <option value="IQ">Irak</option>
                        <option value="LB">Libanon</option>
                        <option value="JP">Japan</option>
                        <option value="JO">Jordanië</option>
                        <option value="KW">Koeweit</option>
                        <option value="KR">Korea</option>
                        <option value="SY">Syrië</option>
                        <option value="TH">Thailand</option>
                        <option value="AE">Verenigde Emiraten</option>
                        <option value="HK">Hong Kong</option>
                        <option value="IN">India</option>
                        <option value="IL">Israël</option>
                        <option value="YE">Jemen</option>
                        <option value="MY">Maleisië</option>
                        <option value="SG">Singapore</option>
                        <option value="CN">Volksrepubliek China</option>
                    </optgroup>
                    <option value="other">Ander land</option>
                </select>
            </div>
            <button class="btn" onclick="nextStep(1)">Volgende</button>
        </div>
        
        <!-- Step 2: Rechtskeuze -->
        <div class="step" id="step2">
            <div class="question">Hebben de partijen een rechtskeuze gemaakt?</div>
            <div class="info-box">
                <p>Een rechtskeuze moet schriftelijk zijn vastgelegd. Bij een notariële akte is de keuze automatisch bindend.</p>
            </div>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="choiceYes" name="legalChoice" value="yes">
                    <label for="choiceYes">Ja</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="choiceNo" name="legalChoice" value="no">
                    <label for="choiceNo">Nee</label>
                </div>
            </div>
            <button class="btn btn-secondary" onclick="previousStep(2)">Vorige</button>
            <button class="btn" onclick="nextStep(2)">Volgende</button>
        </div>
        
        <!-- Step 2a: Type rechtskeuze (alleen als ja) -->
        <div class="step" id="step2a">
            <div class="question">Is de rechtskeuze notarieel vastgelegd?</div>
            <div class="info-box">
                <p>Een notariële rechtskeuze is bindend en bepaalt automatisch het toepasselijke recht. Bij een onderhandse akte zijn aanvullende gegevens nodig.</p>
            </div>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="notarialYes" name="notarial" value="yes">
                    <label for="notarialYes">Ja, notarieel</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="notarialNo" name="notarial" value="no">
                    <label for="notarialNo">Nee, onderhandse akte</label>
                </div>
            </div>
            <div class="input-group">
                <label for="chosenLaw">Voor welk recht is gekozen?</label>
                <select id="chosenLaw">
                    <option value="">Selecteer een land</option>
                    <optgroup label="Noord-Europa">
                        <option value="FI">Fins recht</option>
                        <option value="NO">Noors recht</option>
                        <option value="IS">IJslands recht</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="NL">Nederlands recht</option>
                        <option value="DE">Duits recht</option>
                        <option value="BE">Belgisch recht</option>
                        <option value="FR">Frans recht</option>
                        <option value="IT">Italiaans recht</option>
                        <option value="ES">Spaans recht</option>
                        <option value="PT">Portugees recht</option>
                        <option value="AT">Oostenrijks recht</option>
                        <option value="CH">Zwitsers recht</option>
                        <option value="UK">Brits recht</option>
                        <option value="IE">Iers recht</option>
                        <option value="DK">Deens recht</option>
                        <option value="SE">Zweeds recht</option>
                        <option value="GR">Grieks recht</option>
                        <option value="CY">Cypriotisch recht</option>
                        <option value="LI">Liechtensteins recht</option>
                        <option value="TR">Turks recht</option>
                        <option value="VA">Vaticaans recht</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="AL">Albanees recht</option>
                        <option value="BG">Bulgaars recht</option>
                        <option value="HU">Hongaars recht</option>
                        <option value="YU">Joegoslavisch recht</option>
                        <option value="PL">Pools recht</option>
                        <option value="RO">Roemeens recht</option>
                        <option value="CZ">Tsjechisch recht</option>
                        <option value="SK">Slowaaks recht</option>
                        <option value="USSR">USSR recht</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Amerikaans recht</option>
                        <option value="CA">Canadees recht</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="DO">Dominicaans recht</option>
                        <option value="HT">Haïtiaans recht</option>
                        <option value="MID_AM">Midden-Amerikaans recht</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Surinaams recht</option>
                        <option value="ZUID_AM">Zuid-Amerikaans recht</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="DZ">Algerijns recht</option>
                        <option value="AO">Angolees recht</option>
                        <option value="EG">Egyptisch recht</option>
                        <option value="CV">Kaapverdiaans recht</option>
                        <option value="MA">Marokkaans recht</option>
                        <option value="SN">Senegalees recht</option>
                        <option value="SO">Somalisch recht</option>
                        <option value="TD">Tsjadisch recht</option>
                        <option value="TN">Tunesisch recht</option>
                        <option value="BW">Botswaans recht</option>
                        <option value="BF">Burkina Faso recht</option>
                        <option value="BI">Burundees recht</option>
                        <option value="KE">Keniaans recht</option>
                        <option value="NG">Nigeriaans recht</option>
                        <option value="SL">Sierra Leoons recht</option>
                        <option value="SD">Soedanees recht</option>
                        <option value="ZA">Zuid-Afrikaans recht</option>
                        <option value="ZR">Zaïrees recht</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="AF">Afghaans recht</option>
                        <option value="ID">Indonesisch recht</option>
                        <option value="IQ">Iraaks recht</option>
                        <option value="LB">Libanees recht</option>
                        <option value="JP">Japans recht</option>
                        <option value="JO">Jordaans recht</option>
                        <option value="KW">Koeweits recht</option>
                        <option value="KR">Koreaans recht</option>
                        <option value="SY">Syrisch recht</option>
                        <option value="TH">Thais recht</option>
                        <option value="AE">VAE recht</option>
                        <option value="HK">Hong Kong recht</option>
                        <option value="IN">Indiaas recht</option>
                        <option value="IL">Israëlisch recht</option>
                        <option value="YE">Jemenitisch recht</option>
                        <option value="MY">Maleisisch recht</option>
                        <option value="SG">Singaporees recht</option>
                        <option value="CN">Chinees recht</option>
                    </optgroup>
                    <option value="other">Ander land</option>
                </select>
            </div>
            <button class="btn btn-secondary" onclick="previousStep('2a')">Vorige</button>
            <button class="btn" onclick="nextStep('2a')">Volgende</button>
        </div>
        
        <!-- Step 3: Eerste huwelijksdomicilie -->
        <div class="step" id="step3">
            <div class="question">Wat was de eerste gewone verblijfplaats na het huwelijk?</div>
            <div class="info-box">
                <p><strong>Definitie volgens artikel 4 HHV 1978:</strong><br>
                Het recht dat van toepassing is op het huwelijksvermogensregime is in beginsel het recht van de staat waar de echtgenoten na het huwelijk hun eerste gewone verblijfplaats hebben gevestigd.</p>
                
                <p><strong>"Gewone verblijfplaats" betekent:</strong><br>
                • De plaats waar iemand zijn of haar feitelijk hoofdverblijf heeft met de intentie daar duurzaam te verblijven<br>
                • Het gaat dus niet slechts om een tijdelijk verblijf (bijvoorbeeld wegens vakantie of studie)<br>
                • Maar om een verblijf met een zekere bestendigheid en stabiliteit<br>
                • De term wordt beoordeeld op basis van feitelijke omstandigheden en de gezamenlijke intentie van de echtgenoten</p>
                
                <p><strong>⚠️ Let op:</strong> Dit is <strong>niet per definitie de huwelijksplaats</strong>. De huwelijksvoltrekking kan elders plaatsvinden dan waar men nadien daadwerkelijk samen gaat wonen.</p>
            </div>
            <div class="input-group">
                <label for="firstDomicile">Eerste gewone verblijfplaats na het huwelijk:</label>
                <select id="firstDomicile" required>
                    <option value="">Selecteer een land</option>
                    <optgroup label="Noord-Europa">
                        <option value="NO">Noorwegen</option>
                        <option value="IS">IJsland</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="BE">België</option>
                        <option value="CY">Cyprus</option>
                        <option value="DK">Denemarken</option>
                        <option value="FR">Frankrijk</option>
                        <option value="IE">Ierland</option>
                        <option value="NL" selected>Nederland</option>
                        <option value="UK">Verenigd Koninkrijk</option>
                        <option value="SE">Zweden</option>
                        <option value="CH">Zwitserland</option>
                        <option value="DE">Duitsland</option>
                        <option value="GR">Griekenland</option>
                        <option value="IT">Italië</option>
                        <option value="LI">Liechtenstein</option>
                        <option value="AT">Oostenrijk</option>
                        <option value="PT">Portugal</option>
                        <option value="ES">Spanje</option>
                        <option value="TR">Turkije</option>
                        <option value="VA">Vaticaan</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="CZ">Tsjechië</option>
                        <option value="SK">Slowakije</option>
                        <option value="USSR">Voormalige USSR landen</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Verenigde Staten</option>
                        <option value="CA">Canada</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="MID_AM">Rest van Midden-Amerika</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Suriname</option>
                        <option value="ZUID_AM">Rest van Zuid-Amerika</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="BW">Botswana</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundi</option>
                        <option value="KE">Kenia</option>
                        <option value="NG">Nigeria</option>
                        <option value="SL">Sierra Leone</option>
                        <option value="SD">Sudan</option>
                        <option value="ZA">Zuid Afrika</option>
                        <option value="ZR">Zaïre</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="HK">Hong Kong</option>
                        <option value="IN">India</option>
                        <option value="IL">Israël</option>
                        <option value="YE">Jemen</option>
                        <option value="MY">Maleisië</option>
                        <option value="SG">Singapore</option>
                        <option value="CN">Volksrepubliek China</option>
                    </optgroup>
                    <option value="other">Ander land</option>
                </select>
            </div>
            <button class="btn btn-secondary" onclick="previousStep(3)">Vorige</button>
            <button class="btn" onclick="nextStep(3)">Volgende</button>
        </div>
        
        <!-- Step 4: Nationaliteiten -->
        <div class="step" id="step4">
            <div class="question">Wat zijn de nationaliteiten van beide partijen?</div>
            <div class="input-group">
                <label for="nationalityMan">Nationaliteit man:</label>
                <select id="nationalityMan" required>
                    <option value="">Selecteer nationaliteit</option>
                    <optgroup label="Noord-Europa">
                        <option value="FI">Finse</option>
                        <option value="NO">Noorse</option>
                        <option value="IS">IJslandse</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="DE">Duitse</option>
                        <option value="GR">Griekse</option>
                        <option value="IT">Italiaanse</option>
                        <option value="LI">Liechtensteinse</option>
                        <option value="NL" selected>Nederlandse</option>
                        <option value="AT">Oostenrijkse</option>
                        <option value="PT">Portugese</option>
                        <option value="ES">Spaanse</option>
                        <option value="TR">Turkse</option>
                        <option value="VA">Vaticaanse</option>
                        <option value="BE">Belgische</option>
                        <option value="CY">Cypriotische</option>
                        <option value="DK">Deense</option>
                        <option value="FR">Franse</option>
                        <option value="IE">Ierse</option>
                        <option value="UK">Britse</option>
                        <option value="SE">Zweedse</option>
                        <option value="CH">Zwitserse</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="AL">Albanese</option>
                        <option value="BG">Bulgaarse</option>
                        <option value="HU">Hongaarse</option>
                        <option value="YU">Joegoslavische</option>
                        <option value="PL">Poolse</option>
                        <option value="RO">Roemeense</option>
                        <option value="CZ">Tsjechische</option>
                        <option value="SK">Slowaakse</option>
                        <option value="USSR">Voormalige USSR</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Amerikaanse</option>
                        <option value="CA">Canadese</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="DO">Dominicaanse</option>
                        <option value="HT">Haïtiaanse</option>
                        <option value="MID_AM">Overige Midden-Amerikaanse</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Surinaamse</option>
                        <option value="ZUID_AM">Overige Zuid-Amerikaanse</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="DZ">Algerijnse</option>
                        <option value="AO">Angolese</option>
                        <option value="EG">Egyptische</option>
                        <option value="CV">Kaapverdische</option>
                        <option value="MA">Marokkaanse</option>
                        <option value="SN">Senegalese</option>
                        <option value="SO">Somalische</option>
                        <option value="TD">Tsjadische</option>
                        <option value="TN">Tunesische</option>
                        <option value="BW">Botswaanse</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundese</option>
                        <option value="KE">Keniaanse</option>
                        <option value="NG">Nigeriaanse</option>
                        <option value="SL">Sierra Leoonse</option>
                        <option value="SD">Soedanese</option>
                        <option value="ZA">Zuid-Afrikaanse</option>
                        <option value="ZR">Zaïrese</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="AF">Afghaanse</option>
                        <option value="ID">Indonesische</option>
                        <option value="IQ">Iraakse</option>
                        <option value="LB">Libanese</option>
                        <option value="JP">Japanse</option>
                        <option value="JO">Jordaanse</option>
                        <option value="KW">Koeweitse</option>
                        <option value="KR">Koreaanse</option>
                        <option value="SY">Syrische</option>
                        <option value="TH">Thaise</option>
                        <option value="AE">VAE</option>
                        <option value="HK">Hong Kong</option>
                        <option value="IN">Indiase</option>
                        <option value="IL">Israëlische</option>
                        <option value="YE">Jemenitische</option>
                        <option value="MY">Maleisische</option>
                        <option value="SG">Singaporese</option>
                        <option value="CN">Chinese</option>
                    </optgroup>
                    <option value="other">Andere</option>
                </select>
            </div>
            <div class="input-group">
                <label for="nationalityWoman">Nationaliteit vrouw:</label>
                <select id="nationalityWoman" required>
                    <option value="">Selecteer nationaliteit</option>
                    <optgroup label="Noord-Europa">
                        <option value="FI">Finse</option>
                        <option value="NO">Noorse</option>
                        <option value="IS">IJslandse</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="DE">Duitse</option>
                        <option value="GR">Griekse</option>
                        <option value="IT">Italiaanse</option>
                        <option value="LI">Liechtensteinse</option>
                        <option value="NL" selected>Nederlandse</option>
                        <option value="AT">Oostenrijkse</option>
                        <option value="PT">Portugese</option>
                        <option value="ES">Spaanse</option>
                        <option value="TR">Turkse</option>
                        <option value="VA">Vaticaanse</option>
                        <option value="BE">Belgische</option>
                        <option value="CY">Cypriotische</option>
                        <option value="DK">Deense</option>
                        <option value="FR">Franse</option>
                        <option value="IE">Ierse</option>
                        <option value="UK">Britse</option>
                        <option value="SE">Zweedse</option>
                        <option value="CH">Zwitserse</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="AL">Albanese</option>
                        <option value="BG">Bulgaarse</option>
                        <option value="HU">Hongaarse</option>
                        <option value="YU">Joegoslavische</option>
                        <option value="PL">Poolse</option>
                        <option value="RO">Roemeense</option>
                        <option value="CZ">Tsjechische</option>
                        <option value="SK">Slowaakse</option>
                        <option value="USSR">Voormalige USSR</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Amerikaanse</option>
                        <option value="CA">Canadese</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="DO">Dominicaanse</option>
                        <option value="HT">Haïtiaanse</option>
                        <option value="MID_AM">Overige Midden-Amerikaanse</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Surinaamse</option>
                        <option value="ZUID_AM">Overige Zuid-Amerikaanse</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="DZ">Algerijnse</option>
                        <option value="AO">Angolese</option>
                        <option value="EG">Egyptische</option>
                        <option value="CV">Kaapverdische</option>
                        <option value="MA">Marokkaanse</option>
                        <option value="SN">Senegalese</option>
                        <option value="SO">Somalische</option>
                        <option value="TD">Tsjadische</option>
                        <option value="TN">Tunesische</option>
                        <option value="BW">Botswaanse</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundese</option>
                        <option value="KE">Keniaanse</option>
                        <option value="NG">Nigeriaanse</option>
                        <option value="SL">Sierra Leoonse</option>
                        <option value="SD">Soedanese</option>
                        <option value="ZA">Zuid-Afrikaanse</option>
                        <option value="ZR">Zaïrese</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="AF">Afghaanse</option>
                        <option value="ID">Indonesische</option>
                        <option value="IQ">Iraakse</option>
                        <option value="LB">Libanese</option>
                        <option value="JP">Japanse</option>
                        <option value="JO">Jordaanse</option>
                        <option value="KW">Koeweitse</option>
                        <option value="KR">Koreaanse</option>
                        <option value="SY">Syrische</option>
                        <option value="TH">Thaise</option>
                        <option value="AE">VAE</option>
                        <option value="HK">Hong Kong</option>
                        <option value="IN">Indiase</option>
                        <option value="IL">Israëlische</option>
                        <option value="YE">Jemenitische</option>
                        <option value="MY">Maleisische</option>
                        <option value="SG">Singaporese</option>
                        <option value="CN">Chinese</option>
                    </optgroup>
                    <option value="other">Andere</option>
                </select>
            </div>
            <button class="btn btn-secondary" onclick="previousStep(4)">Vorige</button>
            <button class="btn" onclick="nextStep(4)">Volgende</button>
        </div>
        
        <!-- Step 5: Huidige situatie -->
        <div class="step" id="step5">
            <div class="question">Wat is de huidige situatie?</div>
            <div class="input-group">
                <label for="currentResidence">Huidige woonplaats:</label>
                <select id="currentResidence" required>
                    <option value="">Selecteer een land</option>
                    <optgroup label="Noord-Europa">
                        <option value="NO">Noorwegen</option>
                        <option value="IS">IJsland</option>
                    </optgroup>
                    <optgroup label="West-Europa">
                        <option value="BE">België</option>
                        <option value="CY">Cyprus</option>
                        <option value="DK">Denemarken</option>
                        <option value="FR">Frankrijk</option>
                        <option value="IE">Ierland</option>
                        <option value="NL" selected>Nederland</option>
                        <option value="UK">Verenigd Koninkrijk</option>
                        <option value="SE">Zweden</option>
                        <option value="CH">Zwitserland</option>
                    </optgroup>
                    <optgroup label="Oost-Europa">
                        <option value="CZ">Tsjechië</option>
                        <option value="SK">Slowakije</option>
                        <option value="USSR">Voormalige USSR landen</option>
                    </optgroup>
                    <optgroup label="Noord-Amerika">
                        <option value="US">Verenigde Staten</option>
                        <option value="CA">Canada</option>
                    </optgroup>
                    <optgroup label="Midden-Amerika">
                        <option value="MID_AM">Rest van Midden-Amerika</option>
                    </optgroup>
                    <optgroup label="Zuid-Amerika">
                        <option value="SR">Suriname</option>
                        <option value="ZUID_AM">Rest van Zuid-Amerika</option>
                    </optgroup>
                    <optgroup label="Afrika">
                        <option value="BW">Botswana</option>
                        <option value="BF">Burkina Faso</option>
                        <option value="BI">Burundi</option>
                        <option value="KE">Kenia</option>
                        <option value="NG">Nigeria</option>
                        <option value="SL">Sierra Leone</option>
                        <option value="SD">Sudan</option>
                        <option value="ZA">Zuid Afrika</option>
                        <option value="ZR">Zaïre</option>
                    </optgroup>
                    <optgroup label="Azië">
                        <option value="HK">Hong Kong</option>
                        <option value="IN">India</option>
                        <option value="IL">Israël</option>
                        <option value="YE">Jemen</option>
                        <option value="MY">Maleisië</option>
                        <option value="SG">Singapore</option>
                        <option value="CN">Volksrepubliek China</option>
                    </optgroup>
                    <option value="other">Ander land</option>
                </select>
            </div>
            <div class="input-group">
                <label for="nlSettlementDate">Wanneer voor het eerst in Nederland gevestigd? (indien van toepassing)</label>
                <input type="date" id="nlSettlementDate">
            </div>
            <button class="btn btn-secondary" onclick="previousStep(5)">Vorige</button>
            <button class="btn" onclick="calculateResult()">Resultaat Berekenen</button>
        </div>
        
        <!-- Resultaat -->
        <div class="result" id="result">
            <!-- Print header (alleen zichtbaar bij printen) -->
            <div class="print-header">
                <h1>Huwelijksvermogensrecht Bepaling</h1>
                <p>Gegenereerd op: <span id="printDate"></span></p>
            </div>
            
            <h2>Resultaat</h2>
            <div id="resultContent"></div>
            
            <!-- Export buttons -->
            <div class="export-buttons" id="exportButtons">
                <button class="btn btn-print" onclick="printResult()">🖨️ Afdrukken</button>
                <button class="btn btn-export" onclick="exportToPDF()">📄 Download PDF</button>
                <button class="btn btn-export" onclick="exportToWord()">📝 Download Word</button>
            </div>
            
            <!-- Print footer (alleen zichtbaar bij printen) -->
            <div class="print-footer">
                <p>© <span id="printYear"></span> Scheidingsdesk - Alle rechten voorbehouden</p>
                <p style="font-style: italic; margin-top: 5pt;">Dit rapport is gegenereerd door de Huwelijksvermogensrecht Bepaler tool en dient alleen ter indicatie.</p>
            </div>
        </div>
    </div>
    
    <div class="footer">
        <div class="copyright">
            © <span id="currentYear"></span> Scheidingsdesk - Alle rechten voorbehouden
        </div>
        <div class="disclaimer">
            <strong>Disclaimer:</strong> Deze tool geeft een indicatie van het toepasselijke recht op basis van de verstrekte informatie. 
            Het resultaat is geen juridisch advies. Voor specifieke situaties en definitieve juridische zekerheid 
            dient altijd een gekwalificeerde jurist te worden geraadpleegd. Scheidingsdesk aanvaardt geen 
            aansprakelijkheid voor beslissingen genomen op basis van de uitkomsten van deze tool.
        </div>
    </div>
    
    <script>
        let currentStep = 1;
        const totalSteps = 5;
        let answers = {};
        
        function updateProgressBar() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function nextStep(step) {
            // Validatie
            if (step === 1) {
                const date = document.getElementById('marriageDate').value;
                const country = document.getElementById('marriageCountry').value;
                if (!date) {
                    alert('Vul alstublieft de huwelijksdatum in.');
                    return;
                }
                if (!country) {
                    alert('Selecteer alstublieft het land waar het huwelijk is voltrokken.');
                    return;
                }
                answers.marriageDate = new Date(date);
                answers.marriageCountry = country;
            } else if (step === 2) {
                const choice = document.querySelector('input[name="legalChoice"]:checked');
                if (!choice) {
                    alert('Selecteer alstublieft of er een rechtskeuze is gemaakt.');
                    return;
                }
                answers.legalChoice = choice.value;
                
                if (choice.value === 'yes') {
                    // Ga naar substap voor rechtskeuze details
                    document.getElementById('step' + step).classList.remove('active');
                    document.getElementById('step2a').classList.add('active');
                    return;
                }
            } else if (step === '2a') {
                const notarial = document.querySelector('input[name="notarial"]:checked');
                const chosenLaw = document.getElementById('chosenLaw').value;
                if (!notarial || !chosenLaw) {
                    alert('Vul alstublieft alle velden in.');
                    return;
                }
                answers.notarial = notarial.value;
                answers.chosenLaw = chosenLaw;
                
                // Als notariële rechtskeuze, ga direct naar resultaat
                if (notarial.value === 'yes') {
                    // Sla standaardwaarden op voor niet-relevante velden
                    answers.firstDomicile = 'N/A';
                    answers.nationalityMan = 'N/A';
                    answers.nationalityWoman = 'N/A';
                    answers.currentResidence = 'N/A';
                    answers.nlSettlementDate = null;
                    
                    calculateResult();
                    return;
                }
                step = 2;
            } else if (step === 3) {
                const domicile = document.getElementById('firstDomicile').value;
                if (!domicile) {
                    alert('Selecteer alstublieft de eerste gewone verblijfplaats na het huwelijk.');
                    return;
                }
                answers.firstDomicile = domicile;
            } else if (step === 4) {
                const natMan = document.getElementById('nationalityMan').value;
                const natWoman = document.getElementById('nationalityWoman').value;
                if (!natMan || !natWoman) {
                    alert('Selecteer alstublieft beide nationaliteiten.');
                    return;
                }
                answers.nationalityMan = natMan;
                answers.nationalityWoman = natWoman;
            }
            
            // Naar volgende stap
            document.getElementById('step' + step).classList.remove('active');
            document.getElementById('step2a').classList.remove('active');
            currentStep++;
            document.getElementById('step' + currentStep).classList.add('active');
            updateProgressBar();
        }
        
        function previousStep(step) {
            if (step === '2a') {
                document.getElementById('step2a').classList.remove('active');
                document.getElementById('step2').classList.add('active');
                return;
            }
            
            document.getElementById('step' + step).classList.remove('active');
            currentStep--;
            
            if (currentStep === 2 && answers.legalChoice === 'yes') {
                document.getElementById('step2a').classList.add('active');
            } else {
                document.getElementById('step' + currentStep).classList.add('active');
            }
            updateProgressBar();
        }
        
        function calculateResult() {
            // Verzamel laatste antwoorden alleen als geen notariële rechtskeuze
            if (!answers.notarial || answers.notarial !== 'yes') {
                const currentRes = document.getElementById('currentResidence').value;
                const nlDate = document.getElementById('nlSettlementDate').value;
                
                if (!currentRes) {
                    alert('Selecteer alstublieft de huidige woonplaats.');
                    return;
                }
                
                answers.currentResidence = currentRes;
                answers.nlSettlementDate = nlDate ? new Date(nlDate) : null;
            }
            
            // Bepaal toepasselijk systeem op basis van huwelijksdatum
            let system = '';
            let applicableLaw = '';
            let explanation = '';
            
            const marriageYear = answers.marriageDate.getFullYear();
            const marriageMonth = answers.marriageDate.getMonth();
            const marriageDay = answers.marriageDate.getDate();
            
            // Bepaal welk systeem van toepassing is
            if (answers.marriageDate >= new Date(2019, 0, 29)) {
                system = 'HVR Verordening (EU) 2016/1103';
                explanation = 'Uw huwelijk valt onder de nieuwe Europese Huwelijksvermogensrecht Verordening die geldt voor huwelijken gesloten vanaf 29 januari 2019.';
            } else if (answers.marriageDate >= new Date(1992, 8, 1)) {
                system = 'Haags Huwelijksvermogensverdrag 1978';
                explanation = 'Uw huwelijk valt onder het Haags Huwelijksvermogensverdrag van 1978 dat in Nederland geldt vanaf 1 september 1992.';
            } else if (answers.marriageDate >= new Date(1977, 7, 23)) {
                system = 'Overgangsperiode (Chelouche van Leer)';
                explanation = 'Uw huwelijk valt in de overgangsperiode tussen het oude verdrag van 1905 en de Chelouche van Leer jurisprudentie.';
            } else if (answers.marriageDate >= new Date(1976, 11, 10)) {
                system = 'Chelouche van Leer arrest';
                explanation = 'Uw huwelijk valt onder het Chelouche van Leer arrest dat geldt vanaf 10 december 1976.';
            } else {
                system = 'Haags Huwelijksverdrag 1905';
                explanation = 'Uw huwelijk valt onder het oude Haags Huwelijksverdrag van 1905.';
            }
            
            // Bepaal toepasselijk recht
            if (answers.legalChoice === 'yes') {
                applicableLaw = getCountryName(answers.chosenLaw);
                explanation += '<br><br>Er is een rechtskeuze gemaakt voor het recht van ' + applicableLaw + '.';
                if (answers.notarial === 'yes') {
                    explanation += ' Deze keuze is notarieel vastgelegd en daarmee definitief bindend. Het gekozen recht is automatisch van toepassing ongeacht andere omstandigheden zoals woonplaats of nationaliteit.';
                } else {
                    explanation += ' Deze keuze is in een onderhandse akte vastgelegd.';
                    // Bij HVR Vo kan onderhandse akte ook geldig zijn onder voorwaarden
                    if (system === 'HVR Verordening (EU) 2016/1103') {
                        explanation += ' Onder de HVR Verordening kan deze keuze geldig zijn als aan bepaalde voorwaarden is voldaan.';
                    }
                }
            } else {
                // Objectieve aanknoping
                if (system === 'HVR Verordening (EU) 2016/1103' || system === 'Haags Huwelijksvermogensverdrag 1978') {
                    // Eerste gewone verblijfplaats na het huwelijk
                    applicableLaw = getCountryName(answers.firstDomicile);
                    explanation += '<br><br>Er is geen rechtskeuze gemaakt. Bij het ' + system + ' volgt automatisch het recht van de eerste gewone verblijfplaats na het huwelijk (' + applicableLaw + ').';
                    
                    // Check voor gemeenschappelijke nationaliteit
                    if (answers.nationalityMan === answers.nationalityWoman && answers.nationalityMan !== answers.firstDomicile) {
                        explanation += '<br><br>Let op: Beide partijen hebben dezelfde nationaliteit (' + getCountryName(answers.nationalityMan) + '). Onder bepaalde omstandigheden kan dit recht van toepassing zijn in plaats van het recht van de eerste gewone verblijfplaats na het huwelijk.';
                    }
                } else if (system === 'Haags Huwelijksverdrag 1905') {
                    // Voor HHV 1905 geldt andere systematiek
                    applicableLaw = getCountryName(answers.nationalityMan);
                    explanation += '<br><br>Er is geen rechtskeuze gemaakt. Onder het Haags Huwelijksverdrag 1905 is automatisch het nationale recht van de man van toepassing.';
                } else if (system === 'Chelouche van Leer arrest') {
                    // Chelouche van Leer systematiek
                    applicableLaw = getCountryName(answers.firstDomicile);
                    explanation += '<br><br>Er is geen rechtskeuze gemaakt. Onder het Chelouche van Leer arrest is het recht van de eerste gewone verblijfplaats na het huwelijk van toepassing.';
                }
            }
            
            // Bepaal bevoegde rechter
            let competentCourt = '';
            let courtExplanation = '';
            
            if (answers.notarial === 'yes') {
                competentCourt = 'Niet bepaald';
                courtExplanation = 'Om de bevoegde rechter te bepalen is aanvullende informatie nodig over de huidige woonplaats van partijen.';
            } else if (answers.currentResidence === 'NL') {
                competentCourt = 'Nederlandse rechter';
                courtExplanation = 'U woont in Nederland, daarom is de Nederlandse rechter bevoegd.';
            } else {
                competentCourt = 'Rechter van ' + getCountryName(answers.currentResidence);
                courtExplanation = 'Op basis van uw huidige woonplaats is deze rechter bevoegd.';
            }
            
            // Bepaal goederenregime
            let propertyRegime = '';
            if (applicableLaw === 'Nederland') {
                if (answers.marriageDate < new Date(2018, 0, 1)) {
                    propertyRegime = 'Algehele gemeenschap van goederen (inclusief voorhuwelijks vermogen en erfenissen/schenkingen)';
                } else {
                    propertyRegime = 'Beperkte gemeenschap van goederen (exclusief voorhuwelijks vermogen en erfenissen/schenkingen)';
                }
            } else if (applicableLaw === 'Duitsland') {
                propertyRegime = 'Zugewinngemeinschaft (scheiding van goederen met verrekening)';
            } else if (applicableLaw === 'België') {
                propertyRegime = 'Wettelijk stelsel (gemeenschap van aanwinsten)';
            } else if (applicableLaw === 'Frankrijk') {
                propertyRegime = 'Communauté réduite aux acquêts (gemeenschap van aanwinsten)';
            } else {
                propertyRegime = 'Het wettelijke stelsel van ' + applicableLaw;
            }
            
            // Toon resultaat
            let resultHTML = `
                <div class="result-item">
                    <h3>Huwelijksgegevens</h3>
                    <p><strong>Huwelijksdatum:</strong> ${answers.marriageDate.toLocaleDateString('nl-NL')}<br>
                    <strong>Land van huwelijksvoltrekking:</strong> ${getCountryName(answers.marriageCountry)}</p>
                </div>
                <div class="result-item">
                    <h3>Toepasselijk Systeem</h3>
                    <p>${system}</p>
                </div>
                <div class="result-item">
                    <h3>Toepasselijk Recht</h3>
                    <p>Het recht van ${applicableLaw} is van toepassing op uw huwelijksvermogensrecht.</p>
                </div>
                <div class="result-item">
                    <h3>Goederenregime</h3>
                    <p>${propertyRegime}</p>
                </div>
                <div class="result-item">
                    <h3>Bevoegde Rechter</h3>
                    <p>${competentCourt === 'Niet bepaald' ? courtExplanation : `De ${competentCourt} is bevoegd om over uw huwelijksvermogensrecht te oordelen.`}</p>
                </div>
                <div class="result-item">
                    <h3>Toelichting</h3>
                    <p>${explanation}</p>
                </div>
            `;
            
            // Extra info voor huwelijksland
            if (answers.marriageCountry === answers.firstDomicile && answers.firstDomicile !== 'N/A') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Consistent huwelijkspatroon</h3>
                        <p>Uw huwelijk is voltrokken in ${getCountryName(answers.marriageCountry)} en dit was ook uw eerste gewone verblijfplaats na het huwelijk. Dit maakt de rechtssituatie duidelijker en vermindert de kans op conflicten tussen verschillende rechtsstelsels.</p>
                    </div>
                `;
            } else if (answers.marriageCountry !== answers.firstDomicile && answers.firstDomicile !== 'N/A') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Huwelijksland vs. Eerste gewone verblijfplaats</h3>
                        <p>Uw huwelijk is voltrokken in ${getCountryName(answers.marriageCountry)}, maar uw eerste gewone verblijfplaats na het huwelijk was ${getCountryName(answers.firstDomicile)}. Dit kan relevant zijn voor de geldigheid van het huwelijk en eventuele rechtskeuzes die tijdens het huwelijk zijn gemaakt.</p>
                    </div>
                `;
            }
            
            // Waarschuwing voor rechtskeuze vorm
            if (answers.legalChoice === 'yes' && answers.notarial === 'no') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Let op: Vorm van rechtskeuze</h3>
                        <p>Uw rechtskeuze is in onderhandse vorm gemaakt. Het recht van ${getCountryName(answers.marriageCountry)} (waar u bent getrouwd) kan specifieke vormvereisten stellen aan rechtskeuzes. Het is raadzaam dit te verifiëren.</p>
                    </div>
                `;
            }
            if (answers.notarial === 'yes') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Belangrijke opmerking bij notariële rechtskeuze</h3>
                        <p>Omdat er een notariële rechtskeuze is gemaakt, is het gekozen recht definitief van toepassing. Dit kan niet meer veranderen door verhuizing of andere omstandigheden. De rechtskeuze prevaleert boven alle objectieve aanknopingspunten.</p>
                    </div>
                `;
            }
            
            // Extra info voor geen rechtskeuze
            if (answers.legalChoice === 'no') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Objectieve aanknoping bij geen rechtskeuze</h3>
                        <p>Omdat er geen rechtskeuze is gemaakt, wordt het toepasselijke recht objectief bepaald:
                        <br>• <strong>HVR Vo / HHV 1978:</strong> Recht van de eerste gewone verblijfplaats na het huwelijk
                        <br>• <strong>HHV 1905:</strong> Nationaal recht van de man
                        <br>• <strong>Chelouche van Leer:</strong> Recht van de eerste gewone verblijfplaats na het huwelijk
                        <br><br>U kunt alsnog een rechtskeuze maken om het toepasselijke recht te wijzigen.</p>
                    </div>
                `;
            }
            
            // Waarschuwing voor HHV 1978
            if (system === 'Haags Huwelijksvermogensverdrag 1978' && answers.legalChoice === 'no') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Let op: Mogelijke verandering van toepasselijk recht</h3>
                        <p>Onder het HHV 1978 kan het toepasselijke recht automatisch veranderen (artikel 7) in bepaalde gevallen:
                        <br>• Bij terugkeer naar land van gemeenschappelijke nationaliteit
                        <br>• Bij verblijf langer dan 10 jaar in een ander land
                        <br>• Als artikel 4 lid 2 sub 3 werd toegepast
                        <br><br>Deze verandering kan worden voorkomen door een rechtskeuze.</p>
                    </div>
                `;
            }
            
            if (answers.currentResidence === 'NL' && answers.firstDomicile && answers.firstDomicile !== 'NL' && answers.firstDomicile !== 'N/A') {
                resultHTML += `
                    <div class="result-item">
                        <h3>Aandachtspunt</h3>
                        <p>U woont nu in Nederland maar uw huwelijksvermogensrecht wordt beheerst door buitenlands recht (op basis van uw eerste gewone verblijfplaats na het huwelijk). Het kan raadzaam zijn om juridisch advies in te winnen over de gevolgen hiervan.</p>
                    </div>
                `;
            }
            
            document.getElementById('resultContent').innerHTML = resultHTML;
            document.getElementById('result').style.display = 'block';
            
            // Toon export buttons
            document.getElementById('exportButtons').classList.add('show');
            
            // Set print dates
            const now = new Date();
            document.getElementById('printDate').textContent = now.toLocaleDateString('nl-NL', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            document.getElementById('printYear').textContent = now.getFullYear();
            
            // Scroll naar resultaat
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        }
        
        function getCountryName(code) {
            const countries = {
                // West-Europa
                'NL': 'Nederland',
                'DE': 'Duitsland',
                'BE': 'België',
                'FR': 'Frankrijk',
                'IT': 'Italië',
                'ES': 'Spanje',
                'PT': 'Portugal',
                'AT': 'Oostenrijk',
                'CH': 'Zwitserland',
                'UK': 'Verenigd Koninkrijk',
                'IE': 'Ierland',
                'DK': 'Denemarken',
                'SE': 'Zweden',
                'GR': 'Griekenland',
                'CY': 'Cyprus',
                'LI': 'Liechtenstein',
                'TR': 'Turkije',
                'VA': 'Vaticaan',
                
                // Noord-Europa
                'FI': 'Finland',
                'NO': 'Noorwegen',
                'IS': 'IJsland',
                
                // Oost-Europa
                'AL': 'Albanië',
                'BG': 'Bulgarije',
                'HU': 'Hongarije',
                'YU': 'Joegoslavië',
                'PL': 'Polen',
                'RO': 'Roemenië',
                'CZ': 'Tsjechië',
                'SK': 'Slowakije',
                'USSR': 'Voormalige USSR landen',
                
                // Noord-Amerika
                'US': 'Verenigde Staten',
                'CA': 'Canada',
                
                // Midden-Amerika
                'DO': 'Dominicaanse Republiek',
                'HT': 'Haïti',
                'MID_AM': 'Rest van Midden-Amerika',
                
                // Zuid-Amerika
                'SR': 'Suriname',
                'ZUID_AM': 'Rest van Zuid-Amerika',
                
                // Afrika
                'DZ': 'Algerije',
                'AO': 'Angola',
                'EG': 'Egypte',
                'CV': 'Kaapverdische Republiek',
                'MA': 'Marokko',
                'SN': 'Senegal',
                'SO': 'Somalië',
                'TD': 'Tsjaad',
                'TN': 'Tunesië',
                'BW': 'Botswana',
                'BF': 'Burkina Faso',
                'BI': 'Burundi',
                'KE': 'Kenia',
                'NG': 'Nigeria',
                'SL': 'Sierra Leone',
                'SD': 'Sudan',
                'ZA': 'Zuid Afrika',
                'ZR': 'Zaïre',
                
                // Azië
                'AF': 'Afghanistan',
                'ID': 'Indonesië',
                'IQ': 'Irak',
                'LB': 'Libanon',
                'JP': 'Japan',
                'JO': 'Jordanië',
                'KW': 'Koeweit',
                'KR': 'Korea',
                'SY': 'Syrië',
                'TH': 'Thailand',
                'AE': 'Verenigde Emiraten',
                'HK': 'Hong Kong',
                'IN': 'India',
                'IL': 'Israël',
                'YE': 'Jemen',
                'MY': 'Maleisië',
                'SG': 'Singapore',
                'CN': 'Volksrepubliek China',
                
                'other': 'het gekozen land'
            };
            return countries[code] || code;
        }
        
        // Initialiseer progress bar
        updateProgressBar();
        
        // Zet het huidige jaar in de footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // Print functionaliteit
        function printResult() {
            window.print();
        }
        
        // PDF Export functionaliteit
        function exportToPDF() {
            // Gebruik browser's print naar PDF functionaliteit
            const printWindow = window.open('', '_blank');
            const printContent = generatePrintContent();
            
            printWindow.document.write(printContent);
            printWindow.document.close();
            
            // Wacht tot content geladen is en open print dialog
            printWindow.onload = function() {
                printWindow.print();
                printWindow.onafterprint = function() {
                    printWindow.close();
                };
            };
        }
        
        // Word Export functionaliteit
        function exportToWord() {
            const content = generateWordContent();
            const blob = new Blob([content], {
                type: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Huwelijksvermogensrecht_Rapport_${new Date().toISOString().slice(0,10)}.doc`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // Genereer print content
        function generatePrintContent() {
            const resultContent = document.getElementById('resultContent').innerHTML;
            const currentDate = new Date().toLocaleDateString('nl-NL', {
                year: 'numeric',
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            return `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <title>Huwelijksvermogensrecht Rapport</title>
                    <style>
                        body {
                            font-family: 'Times New Roman', serif;
                            font-size: 12pt;
                            line-height: 1.4;
                            color: black;
                            margin: 20px;
                            background: white;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 30pt;
                            padding-bottom: 15pt;
                            border-bottom: 2px solid black;
                        }
                        .header h1 {
                            margin: 0;
                            font-size: 18pt;
                        }
                        .result-item {
                            border: 1px solid #ccc;
                            margin-bottom: 15pt;
                            padding: 15pt;
                            page-break-inside: avoid;
                            break-inside: avoid;
                        }
                        .result-item h3 {
                            font-size: 14pt;
                            margin: 0 0 8pt 0;
                            color: black;
                        }
                        .result-item p {
                            font-size: 11pt;
                            margin: 0;
                            color: black;
                        }
                        .footer {
                            position: fixed;
                            bottom: 20pt;
                            left: 0;
                            right: 0;
                            text-align: center;
                            font-size: 9pt;
                            border-top: 1px solid #ccc;
                            padding-top: 10pt;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Huwelijksvermogensrecht Bepaling</h1>
                        <p>Gegenereerd op: ${currentDate}</p>
                    </div>
                    
                    <h2>Resultaat</h2>
                    ${resultContent}
                    
                    <div class="footer">
                        <p>© ${new Date().getFullYear()} Scheidingsdesk - Alle rechten voorbehouden</p>
                        <p style="font-style: italic; margin-top: 5pt;">Dit rapport is gegenereerd door de Huwelijksvermogensrecht Bepaler tool en dient alleen ter indicatie.</p>
                    </div>
                </body>
                </html>
            `;
        }
        
        // Genereer Word content
        function generateWordContent() {
            const resultContent = document.getElementById('resultContent').innerHTML;
            const currentDate = new Date().toLocaleDateString('nl-NL', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Converteer HTML naar Word-compatible format
            const wordContent = resultContent
                .replace(/<div class="result-item">/g, '<div style="border: 1px solid #ccc; margin-bottom: 15pt; padding: 15pt; page-break-inside: avoid;">')
                .replace(/<h3>/g, '<h3 style="font-size: 14pt; margin: 0 0 8pt 0; color: black;">')
                .replace(/<p>/g, '<p style="font-size: 11pt; margin: 0; color: black;">');
            
            return `
                <html xmlns:o="urn:schemas-microsoft-com:office:office"
                      xmlns:w="urn:schemas-microsoft-com:office:word"
                      xmlns="http://www.w3.org/TR/REC-html40">
                <head>
                    <meta charset="utf-8">
                    <title>Huwelijksvermogensrecht Rapport</title>
                    <!--[if gte mso 9]>
                    <xml>
                        <w:WordDocument>
                            <w:View>Print</w:View>
                            <w:Zoom>90</w:Zoom>
                            <w:DoNotPromptForConvert/>
                            <w:DoNotShowInsertionsAndDeletions/>
                        </w:WordDocument>
                    </xml>
                    <![endif]-->
                    <style>
                        body {
                            font-family: 'Times New Roman', serif;
                            font-size: 12pt;
                            line-height: 1.4;
                            margin: 1in;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 30pt;
                            padding-bottom: 15pt;
                            border-bottom: 2px solid black;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Huwelijksvermogensrecht Bepaling</h1>
                        <p>Gegenereerd op: ${currentDate}</p>
                    </div>
                    
                    <h2>Resultaat</h2>
                    ${wordContent}
                    
                    <div style="margin-top: 30pt; text-align: center; font-size: 9pt; border-top: 1px solid #ccc; padding-top: 10pt;">
                        <p>© ${new Date().getFullYear()} Scheidingsdesk - Alle rechten voorbehouden</p>
                        <p style="font-style: italic; margin-top: 5pt;">Dit rapport is gegenereerd door de Huwelijksvermogensrecht Bepaler tool en dient alleen ter indicatie.</p>
                    </div>
                </body>
                </html>
            `;
        }
    </script>
</body>
</html>